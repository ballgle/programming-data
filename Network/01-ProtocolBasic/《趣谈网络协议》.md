# 趣谈网络协议

## 01-01：有了 IP 地址，还要 MAC 地址做什么

MAC 地址用于局域网寻址，IP 地址用于网络寻址。通过路由确定 IP，通过 IP 获取 MAC。

- **因为ip地址是可以随时变化的**，而mac地址是机器厂商给每个网卡配置的，是独一无二的，所以需要通过ip地址找到对应的mac地址再传输。并且这个过程所用的方法是ARP协议，即地址解析协议。通过广播的方式找到对应的mac地址。实际过程很复杂，因为ip地址会改变，所以同一个ip对应的mac地址也会变，需要用到其他技术来缓存，看地址是否失效，失效则需要重新使用arp广播查找mac地址
- **历史遗留问题**：早期的以太网只有交换机，没有路由器，以太网内通过MAC地址通信。后来才有了互联网，为了兼容原本的模式，采用了IP+MAC地址通信的方式。为啥不推到了重来呢？看看IPv6的处境你就知道了。所以是先有MAC地址后有的IP，IP的提出主要还是因为MAC地址本身的缺陷，这个问题换成有了MAC为何还要IP地址也很有意思。
- **MAC地址本身的缺陷**：因为MAC地址是硬件提供商写在网卡中的，MAC地址虽然唯一但是不能表明用户在整个互联网中的位置，除非维护一个超级大MAC地址对应表，那寻址效率肯定爆炸。但是IP地址解决了这个问题，因为IP地址是网络提供商给你的，所以你在哪里整个网络都是知道的。
